authenticated-authorizer:
  handler: src/handlers/auth/authorizers/authenticated-authorizer.handler
  type: TOKEN

post-auth-login:
  handler: src/handlers/auth/post-auth-login.handler
  timeout: 30
  events:
    - http:
        path: /auth/login
        method: post
        cors: ${self:custom.cors}

post-auth-register:
  handler: src/handlers/auth/post-auth-register.handler
  timeout: 30
  events:
    - http:
        path: /auth/register
        method: post
        cors: true

post-auth-confirmation-code:
  handler: src/handlers/auth/post-auth-confirmation-code.handler
  timeout: 30
  events:
    - http:
        path: /auth/confirmation-code
        method: post
        cors: ${self:custom.cors}

post-auth-forgot-password:
  handler: src/handlers/auth/post-auth-forgot-password.handler
  timeout: 30
  events:
    - http:
        path: /auth/forgot-password
        method: post
        cors: ${self:custom.cors}

post-auth-reset-password:
  handler: src/handlers/auth/post-auth-reset-password.handler
  timeout: 30
  events:
    - http:
        path: /auth/reset-password
        method: post
        cors: ${self:custom.cors}

post-auth-confirm-password:
  handler: src/handlers/auth/post-auth-confirm-password.handler
  timeout: 30
  events:
    - http:
        path: /auth/confirm-password
        method: post
        cors: ${self:custom.cors}
        authorizer: authenticated-authorizer

post-auth-attributes:
  handler: src/handlers/auth/post-auth-attributes.handler
  timeout: 30
  events:
    - http:
        path: /auth/attributes
        method: post
        cors: ${self:custom.cors}
        authorizer: authenticated-authorizer

post-auth-attributes-verify:
  handler: src/handlers/auth/post-auth-attributes-verify.handler
  timeout: 30
  events:
    - http:
        path: /auth/attributes/verify
        method: post
        cors: ${self:custom.cors}
        authorizer: authenticated-authorizer

post-auth-attributes-confirm:
  handler: src/handlers/auth/post-auth-attributes-confirm.handler
  timeout: 30
  events:
    - http:
        path: /auth/attributes/confirm
        method: post
        cors: ${self:custom.cors}
        authorizer: authenticated-authorizer

# post-auth-mfa-sms-enable:
#   handler: src/handlers/auth/post-auth-mfa-sms-enable.handler
#   timeout: 30
#   events:
#     - http:
#         path: /auth/mfa/sms-enable
#         method: post
#         cors: ${self:custom.cors}
#         authorizer: authenticated-authorizer

# post-auth-mfa-totp-enable:
#   handler: src/handlers/auth/post-auth-mfa-totp-enable.handler
#   timeout: 30
#   events:
#     - http:
#         path: /auth/mfa/totp-enable
#         method: post
#         cors: ${self:custom.cors}
#         authorizer: authenticated-authorizer

# post-auth-mfa-totp-associate:
#   handler: src/handlers/auth/post-auth-mfa-totp-associate.handler
#   timeout: 30
#   events:
#     - http:
#         path: /auth/mfa/totp-associate
#         method: post
#         cors: ${self:custom.cors}
#         authorizer: authenticated-authorizer

# post-auth-mfa-totp-verify:
#   handler: src/handlers/auth/post-auth-mfa-totp-verify.handler
#   timeout: 30
#   events:
#     - http:
#         path: /auth/mfa/totp-verify
#         method: post
#         cors: ${self:custom.cors}
#         authorizer: authenticated-authorizer

# post-auth-mfa-totp-challenge:
#   handler: src/handlers/auth/post-auth-mfa-totp-challenge.handler
#   timeout: 30
#   events:
#     - http:
#         path: /auth/mfa/totp-challenge
#         method: post
#         cors: ${self:custom.cors}

# post-auth-mfa-totp-disable:
#   handler: src/handlers/auth/post-auth-mfa-totp-disable.handler
#   timeout: 30
#   events:
#     - http:
#         path: /auth/mfa/totp-disable
#         method: post
#         cors: ${self:custom.cors}
#         authorizer: authenticated-authorizer

get-auth-refresh:
  handler: src/handlers/auth/get-auth-refresh.handler
  timeout: 30
  events:
    - http:
        path: /auth/refresh
        method: get
        cors: ${self:custom.cors}

get-auth-session:
  handler: src/handlers/auth/get-auth-session.handler
  timeout: 30
  events:
    - ${self:custom.keepAlive}
    - http:
        path: /auth/session
        method: get
        cors: ${self:custom.cors}
        authorizer: authenticated-authorizer

post-auth-idp-code:
  handler: src/handlers/auth/post-auth-idp-code.handler
  timeout: 30
  events:
    - http:
        path: /auth/idp/code
        method: post
        cors: ${self:custom.cors}

github-post-auth-token:
  handler: src/handlers/auth/github/post-auth-token.handler
  timeout: 30
  events:
    - http:
        path: /auth/github/token
        method: post
        cors: ${self:custom.cors}

github-get-auth-user:
  handler: src/handlers/auth/github/get-auth-user.handler
  timeout: 30
  events:
    - http:
        path: /auth/github/user
        method: get
        cors: ${self:custom.cors}
